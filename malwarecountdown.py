#TODO: TEST IF THIS FILE CAN BE DELETED. I THINK YOU'VE MOVED THE CODE TO ANOTHER FILE  
from re import M
import tkinter as tk
from tkinter import messagebox
from datetime import datetime, timedelta
from time import time
from threading import Thread


class MalwareTimer(Thread):
    def __init__(self, timer_val: tk.StringVar) -> None:
        super().__init__()
        print('MalwareTimer Initiated')
        self.today = datetime.now()
        self.termination_time = datetime.strptime('13:20', '%H:%M') 
        self.start_time = datetime.strptime('13:10', '%H:%M')
        self.playing = True
        self.timer_val = timer_val
    
    #NOTE: Overrides inbuilt method
    def run(self):
        print('MalwareTimer Initiated: run_timer_called')
        while self.playing:
            time_now = (datetime.now())
            todays_date = datetime.today()
            remaining = time_now.combine(todays_date, self.termination_time.time()) - time_now.combine(todays_date, time_now.time())
            #print(f'R: {remaining}')
            self.timer_val.set(f'TIME UNTIL PERMENANT DATA lOSS: {remaining}')
            if remaining <= timedelta(microseconds=0) : #TODO: This needs to be refeined to avoid errors
                self.playing = False
                self.timer_val.set(f'TIME UNTIL PERMENANT DATA lOSS: 00:00:00.000000')
        
        #messagebox.showinfo("GAME OVER", f'YOU ARE MALWARED')
    
    
    def show_dialgoues(self):
            pass
    


